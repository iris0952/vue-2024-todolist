import{u as C,r as g,c as u,o as h,j as k,a as n,b as i,d as o,k as m,f as p,v as c,g as f,l as y,m as x}from"./index-DGiUeT1g.js";import{S as V,v}from"./SideBanner-DX1WZMma.js";import{T as S,e as B}from"./cookieHandler-vFihtQH5.js";import{u as N}from"./auth-CMLXvSwL.js";const T={id:"loginPage",class:"bg-yellow"},L={class:"conatiner loginPage vhContainer"},j={class:"formControls",action:"index.html"},q={key:0},E={key:1},I=["disabled"],H={__name:"LoginView",setup(M){const d=C(),a=N(),s=g({email:"",password:""}),l=u(()=>{const t=s.value;return{email:v(t.email,"email"),password:v(t.password,"password")}}),_=u(()=>Object.values(l.value).includes(!1)),w=async()=>{try{await a.login(s.value),S("success","登入成功"),d.push("/todo")}catch(t){B(t)}};return h(async()=>{await a.authCheck(),a.status&&d.push("/todo")}),(t,e)=>{const b=k("router-link");return n(),i("div",T,[o("div",L,[m(V),o("div",null,[o("form",j,[e[3]||(e[3]=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),e[4]||(e[4]=o("label",{class:"formControls_label",for:"email"},"Email",-1)),p(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.email=r),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[c,s.value.email]]),l.value.email?f("",!0):(n(),i("span",q,"請正確輸入 email")),e[5]||(e[5]=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),p(o("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.password=r),class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[c,s.value.password]]),l.value.password?f("",!0):(n(),i("span",E,"請正確輸入密碼")),o("button",{type:"button",class:"formControls_btnSubmit",onClick:w,disabled:_.value}," 登入 ",8,I),m(b,{to:"/register",class:"formControls_btnLink"},{default:y(()=>e[2]||(e[2]=[x("註冊帳號")])),_:1})])])])])}}};export{H as default};
